{% extends "base.html" %}

{% block title %}{{ book.title }}{% endblock %}

{% block content %}
	<h1>{{ book.title }}</h1>
	<p><span class="edit"><a href="{{ url_for('edit_book', id = book.id) }}">EDIT</a></span> <span class="delete"><a href="{{ url_for('delete_book', id = book.id) }}">DELETE</a></span></p>
	<div>
		{% if book.cover %}
		<img src="{{ book.cover }}" alt="" />
		{% endif %}
	</div>
	<div>
		<h3>Description</h3>
		{% if book.description %}
			<p>{{ book.description }}</p>
		{% else %}
			<p><i>This book has no current description.</i></p>
		{% endif %}
	</div>
	<div>
		<h3>Authors</h3>
		<ul>
			{% if book.authors %}
				{% for author in book.authors %}
					<li><a href="{{ url_for('catalog_author', id = author.id) }}">{% if author.first_name %}{{ author.first_name }} {% endif %}{{ author.last_name }}</a></li>
				{% endfor %}
			{% else %}
				<li><i>This book has no current authors.</i></li>
			{% endif %}
		</ul>
	</div>
	<div>
		<h3>Genres</h3>
			<ul>
				{% if book.genres %}
					{% for genre in book.genres %}
					<li><a href="{{ url_for('catalog_genre', id = genre.id) }}">{{ genre.type }}</a></li>
					{% endfor %}
				{% else %}
					<li>This book has no current genres</li>
				{% endif %}
			</ul>
	</div>
	{% if user %}
		<div>
			{% if book in user.library %}
				<p><a href="{{ url_for('delete_library', id = book.id, user = user) }}">REMOVE FROM LIBRARY</a></p>
			{% else %}
				<p><a href="{{ url_for('add_library', id = book.id, user = user) }}">ADD TO LIBRARY</a></p>
			{% endif %}
			{% if book in user.wishlist %}
				<p><a href="#">REMOVE FROM WISHLIST</a></p>
			{% else %}
				<p><a href="#">ADD TO WISHLIST</a></p>
			{% endif %}
		</div>
	{% endif %}

{% endblock %}